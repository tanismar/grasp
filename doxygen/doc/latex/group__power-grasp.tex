\section{power-\/grasp}
\label{group__power-grasp}\index{power-\/grasp@{power-\/grasp}}


A module that, given a 3\+D point cloud representing an object, finds the best position on the object where the hand should be placed to obtain a successful power grasp.  


A module that, given a 3\+D point cloud representing an object, finds the best position on the object where the hand should be placed to obtain a successful power grasp. 

For further information\+:

I.\+Gori, U. Pattacini, V. Tikhanoff, G. Metta Ranking the Good Points\+: A Comprehensive Method for Humanoid Robots to Grasp Unknown Objects In Proceedings of I\+E\+E\+E International Conference on Advanced Robotics (I\+C\+A\+R), 2013.\hypertarget{group__handIKModule_intro_sec}{}\subsection{Description}\label{group__handIKModule_intro_sec}
This module, given a set of 3\+D points, returns the best end-\/effector position and orientation that will lead to a successful grasp. It commands directly to the actions\+Rendering\+Engine module, which is equipped with a dedicated function called power\+Grasp. It usually takes the 3\+D point cloud from the object-\/reconstruction module.\hypertarget{group__handIKModule_rpc_port}{}\subsection{Commands\+:}\label{group__handIKModule_rpc_port}
The commands sent as bottles to the module port /$<$mod\+Name$>$/rpc are described in the following\+:

{\bfseries H\+E\+L\+P} ~\newline
format\+: \mbox{[}help\mbox{]} ~\newline
action\+: a list of all the possible commands to send to the rpc port is printed.

{\bfseries S\+E\+T\+\_\+\+V\+I\+S\+U\+A\+L\+I\+Z\+A\+T\+I\+O\+N} ~\newline
format\+: \mbox{[}set visualization param\mbox{]} ~\newline
action\+: if param is set to on, a 3\+D viewer containing the reconstructed point cloud along with the chosen end-\/effector position and orientation is depicted. Otherwise this functionality is disabled.

{\bfseries S\+E\+T\+\_\+\+W\+I\+N\+D\+O\+W} ~\newline
format\+: \mbox{[}set param1 param2\mbox{]} ~\newline
action\+: param1 can be x, y, w or h, and it refers respectively to the x position, the y position, the width and the height of the 3\+D viewer. param2 has to be set to the value that is wanted to assign.

{\bfseries S\+E\+T\+\_\+\+T\+R\+A\+I\+N} ~\newline
format\+: \mbox{[}set train param\mbox{]} ~\newline
action\+: if param is set to on, the module runs in training modality; this means that points will be chosen randomly and saved to a dedicated file for a later training stage.

{\bfseries S\+E\+T\+\_\+\+T\+E\+S\+T\+S\+V\+M} ~\newline
format\+: \mbox{[}set test\+With\+S\+V\+M param\mbox{]} ~\newline
action\+: if param is set to on, the module uses the function learned through S\+V\+M, which associate a curvature to the successful probability of the grasp. Usually this parameter is set to off, as we already know the best curvature that should be chosen for the hand of the i\+Cub.

{\bfseries S\+E\+T\+\_\+\+O\+F\+F\+S\+E\+T} ~\newline
format\+: \mbox{[}set param1 x y z\mbox{]} ~\newline
action\+: param1 can be offset\+L, for the left arm, or offset\+R, for the right arm. It sets an offset on the corresponding arm (represented by x, y and z), in case there is some error in the mapping between the eye and the arm.

{\bfseries S\+E\+T\+\_\+\+M\+O\+D\+A\+L\+I\+T\+Y} ~\newline
format\+: \mbox{[}set modality param\mbox{]} ~\newline
action\+: param can be set to right, left, center or top. It imposes the corresponding area of the object from which candidate end-\/effector positions should be chosen.

{\bfseries S\+E\+T\+\_\+\+F\+I\+L\+T\+E\+R} ~\newline
format\+: \mbox{[}set filter param\mbox{]} ~\newline
action\+: param can be set to on or off. It is usually set to on, as the stereo vision library provides noisy point clouds. A statistical outlier removal filter is usually needed to obtain clearer point clouds.

{\bfseries S\+E\+T\+\_\+\+W\+R\+I\+T\+E} ~\newline
format\+: \mbox{[}set write param\mbox{]} ~\newline
action\+: param can be set to on or off. If it is set to on, the current point cloud is saved in the path specified in the config file.

{\bfseries B\+L\+O\+C\+K} ~\newline
format\+: \mbox{[}block param\mbox{]} ~\newline
action\+: param can be set to right or left. It is useful if it is wanted to force the i\+Cub to use a specific arm. The arm can be unblocked using the command U\+N\+B\+L\+O\+C\+K.

{\bfseries U\+N\+B\+L\+O\+C\+K} ~\newline
format\+: \mbox{[}unblock param\mbox{]} ~\newline
action\+: param can be set to right or left. It serves to unblock an arm that was previously blocked using the command B\+L\+O\+C\+K.

{\bfseries G\+R\+A\+S\+P} ~\newline
format\+: \mbox{[}grasp (x y)\mbox{]} \char`\"{}wait\char`\"{} ~\newline
action\+: the algorithm runs to find a good end-\/effector position and orientation, and sends such pose to the actions\+Rendering\+Engine module, which executes the grasp. If the optional parameter wait is present, the grasp is computed and depicted but it is not executed. If then the user wants to execute the grasp, he has to use the command G\+O. Otherwise, to reset the computation, he can use the command D\+O\+N\+T.

{\bfseries G\+O} ~\newline
format\+: \mbox{[}go\mbox{]} ~\newline
action\+: if the computation of the grasp was successful but the grasp has not been executed yet because the wait command has been added to G\+R\+A\+S\+P, go makes the robot execute the grasp.

{\bfseries D\+O\+N\+T} ~\newline
format\+: \mbox{[}dont\mbox{]} ~\newline
action\+: it resets all the information that has been previously computed. It is usually used when a grasp (x y) wait command has been sent, and the computed grasp is not satisfactory.

{\bfseries I\+S\+G\+R\+A\+S\+P\+E\+D} ~\newline
format\+: \mbox{[}is\+Grasped\mbox{]} ~\newline
action\+: returns A\+C\+K if the grasp has been successfully executed by A\+R\+E, otherwise returns N\+A\+C\+K.\hypertarget{group__handIKModule_lib_sec}{}\subsection{Libraries}\label{group__handIKModule_lib_sec}

\begin{DoxyItemize}
\item Y\+A\+R\+P libraries.
\item objects3\+D library
\item \hyperlink{group__minimumBoundingBox}{minimum\+Bounding\+Box} library
\item Open\+C\+V library
\item Point Cloud Library.
\end{DoxyItemize}\hypertarget{group__handIKModule_portsc_sec}{}\subsection{Ports Created}\label{group__handIKModule_portsc_sec}

\begin{DoxyItemize}
\item {\itshape /} $<$mod\+Name$>$/rpc remote procedure call. It always replies something.
\item {\itshape /} $<$mod\+Name$>$/are/cmd\+:o this is the port through which end-\/effector position and orientation are commanded to A\+R\+E to execute the grasp.
\item {\itshape /} $<$mod\+Name$>$/mesh\+:i this is the port where the module reads the point cloud.
\item {\itshape /} $<$mod\+Name$>$/reconstruction the module sends to this port a pixel belonging to the object to be segmented and reconstructed.
\item {\itshape /} $<$mod\+Name$>$/depth2kin\+:o this is the port that asks depth2kin the 3\+D point computed taking into account the errors between the arm and the eye.
\end{DoxyItemize}\hypertarget{group__handIKModule_parameters_sec}{}\subsection{Parameters}\label{group__handIKModule_parameters_sec}
The following are the options that are usually contained in the configuration file\+:

--name {\itshape name} 
\begin{DoxyItemize}
\item specify the module name, which is {\itshape power-\/grasp} by default.
\end{DoxyItemize}

--robot {\itshape robot} 
\begin{DoxyItemize}
\item specify the robot that has to be used. It is icub by default.
\end{DoxyItemize}

--n\+Angles {\itshape n\+Angles} 
\begin{DoxyItemize}
\item number of angles to be analyzed to choose the best end-\/effector orientation.
\end{DoxyItemize}

-- radius\+Search {\itshape radius\+Search} 
\begin{DoxyItemize}
\item double representing the area of the neighborhood to be searched to compute surface normals. It is usually set to the area of the robot's palm.
\end{DoxyItemize}

-- number\+Of\+Best\+Points {\itshape number\+Of\+Best\+Points} 
\begin{DoxyItemize}
\item number of the best points chosen with respect to their curvature. Those points will be successively evaluated to choose the end-\/effector orientation.
\end{DoxyItemize}

-- curvature {\itshape curvature} 
\begin{DoxyItemize}
\item best curvature that probably leads to successful grasps given the robot's palm.
\end{DoxyItemize}

-- hand\+Size {\itshape hand\+Size} 
\begin{DoxyItemize}
\item size of the hand from the thumb to the little.
\end{DoxyItemize}

-- finger\+Size {\itshape finger\+Size} 
\begin{DoxyItemize}
\item size of the middle finger.
\end{DoxyItemize}

-- path {\itshape path} 
\begin{DoxyItemize}
\item in case the user wants to run the algorithm in simulation using an already reconstructed 3\+D point cloud, he can put a .ply file representing such cloud in the path directory.
\end{DoxyItemize}

-- from\+File {\itshape from\+File} 
\begin{DoxyItemize}
\item if this parameter is set to true, the algorithm runs in simulation using a .ply file that contains the point cloud to be evaluated, which is in the \char`\"{}path\char`\"{} dir.
\end{DoxyItemize}

-- use\+Learning {\itshape use\+Learning} 
\begin{DoxyItemize}
\item if this parameter is set to true, the lssvm previously trained will be used. Usually this parameter is set to false, as we already know which is the best curvature for the i\+Cub's hand.
\end{DoxyItemize}

-- x {\itshape x} 
\begin{DoxyItemize}
\item x position of the window that depicts the point cloud.
\end{DoxyItemize}

-- y {\itshape y} 
\begin{DoxyItemize}
\item y position of the window that depicts the point cloud.
\end{DoxyItemize}

-- w {\itshape w} 
\begin{DoxyItemize}
\item width of the window that depicts the point cloud.
\end{DoxyItemize}

-- h {\itshape h} 
\begin{DoxyItemize}
\item height of the window that depicts the point cloud.
\end{DoxyItemize}

-- disable\+Right {\itshape disable\+Right} 
\begin{DoxyItemize}
\item if the user wants to disable the right arm from the beginning (for instance if the robot has the right arm broken, so the cartesian interface cannot be opened), this parameter should be present in the config file. If it is not present, the right arm will not be disabled.
\end{DoxyItemize}

-- disable\+Left {\itshape disable\+Left} 
\begin{DoxyItemize}
\item if the user wants to disable the left arm from the beginning (for instance if the robot has the left arm broken, so the cartesian interface cannot be opened), this parameter should be present in the config file. If it is not present, the left arm will not be disabled.
\end{DoxyItemize}

-- offset\+R {\itshape offset\+R} 
\begin{DoxyItemize}
\item it is possible to set an offset to compensate the error between the right arm and the eye.
\end{DoxyItemize}

-- offset\+L {\itshape offset\+L} 
\begin{DoxyItemize}
\item it is possible to set an offset to compensate the error between the left arm and the eye.
\end{DoxyItemize}

-- output\+Dir {\itshape output\+Dir} 
\begin{DoxyItemize}
\item the folder where point clouds will be saved.
\end{DoxyItemize}

-- lssvm {\itshape } 
\begin{DoxyItemize}
\item a group of parameters as they are returned by the learning\+Machine library in icub-\/main.
\end{DoxyItemize}\hypertarget{group__handIKModule_tested_os_sec}{}\subsection{Tested O\+S}\label{group__handIKModule_tested_os_sec}
Windows, Linux

\begin{DoxyAuthor}{Author}
Ilaria Gori 
\end{DoxyAuthor}
